
// ============================================
// GENERIC ERP MODULES (Simple Workflow)
// ============================================

model sales {
  id          String       @id @default(cuid())
  company_id  String
  customer    String?
  date        DateTime     @default(now())
  totalAmount Decimal      @db.Decimal(15, 2)
  status      String?      // Paid, Unpaid, Partial
  paymentMethod String?
  notes       String?      @db.Text
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  items       sale_items[]
  debtor_entry sundry_debtors?
}

model sale_items {
  id          String   @id @default(cuid())
  sale_id     String
  product_id  String
  quantity    Int
  price       Decimal  @db.Decimal(12, 2)

  sale        sales    @relation(fields: [sale_id], references: [id], onDelete: Cascade)
  product     inventory_items @relation(fields: [product_id], references: [id])
}

model purchases {
  id          String   @id @default(cuid())
  company_id  String
  supplier    String?
  date        DateTime @default(now())
  amount      Decimal  @db.Decimal(15, 2)
  status      String?  // Paid, Unpaid, Partial
  paymentMethod String?
  notes       String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  items       purchase_items[]
  creditor_entry sundry_creditors?
}

model purchase_items {
  id          String   @id @default(cuid())
  purchase_id String
  product_id  String
  quantity    Int
  unitCost    Decimal  @db.Decimal(12, 2)
  total       Decimal  @db.Decimal(12, 2)

  purchase    purchases @relation(fields: [purchase_id], references: [id], onDelete: Cascade)
  product     inventory_items @relation(fields: [product_id], references: [id])
}

model expenses {
  id          String   @id @default(cuid())
  company_id  String
  category    String
  description String?
  amount      Decimal  @db.Decimal(15, 2)
  date        DateTime @default(now())
  status      String?  // Paid, Accrued
  payeeName   String?
  paymentMethod String?
  notes       String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  creditor_entry sundry_creditors?
}

model inventory_items {
  id          String   @id @default(cuid())
  company_id  String
  name        String
  sku         String?
  category    String?
  stock       Int      @default(0)
  unit        String?
  costPrice   Decimal  @default(0) @db.Decimal(12, 2)
  salePrice   Decimal  @default(0) @db.Decimal(12, 2)
  status      String   @default("In Stock")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  sale_items     sale_items[]
  purchase_items purchase_items[]
}

model sundry_debtors {
  id              String   @id @default(cuid())
  company_id      String
  name            String
  contactPerson   String?
  sale_id         String?  @unique
  email           String?
  phone           String?
  amount          Decimal  @db.Decimal(15, 2) // Current outstanding
  due             DateTime?
  aging           Int      @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  sale            sales?    @relation(fields: [sale_id], references: [id])
}

model sundry_creditors {
  id              String   @id @default(cuid())
  company_id      String
  name            String
  contactPerson   String?
  expense_id      String?  @unique
  purchase_id     String?  @unique
  amount          Decimal  @db.Decimal(15, 2) // Current outstanding
  originalAmount  Decimal? @db.Decimal(15, 2)
  paidAmount      Decimal? @default(0) @db.Decimal(15, 2)
  due             DateTime?
  aging           Int      @default(0)
  status          String?  // Pending, Paid
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  expense         expenses? @relation(fields: [expense_id], references: [id])
  purchase        purchases? @relation(fields: [purchase_id], references: [id])
}
